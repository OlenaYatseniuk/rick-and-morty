{"version":3,"file":"static/js/687.a541fa41.chunk.js","mappings":"0QACA,GAAgB,aAAe,gCAAgC,KAAO,wBAAwB,WAAa,8BAA8B,YAAc,gC,mBCoEvJ,MAzDA,WACE,IAAAA,GAAwBC,EAAAA,EAAAA,UACtBC,aAAaC,QAAQ,SACjBC,KAAKC,MAAMH,aAAaC,QAAQ,UAChC,MACLG,GAAAC,EAAAA,EAAAA,GAAAP,EAAA,GAJMQ,EAAIF,EAAA,GAAEG,EAAOH,EAAA,GAKdI,GAAWC,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,eAAc,CAAEC,SAAU,MAErCC,GAAQC,EAAAA,EAAAA,IAAe,CAC3BC,UAAW,SAACC,GAAY,OAAKT,EAAQS,EAAa,EAClDC,QAAS,SAACC,GAAK,OAAKC,QAAQC,IAAI,gBAAiBF,EAAM,IA8BzD,OA3BAG,EAAAA,EAAAA,YAAU,WACRF,QAAQC,IAAI,OAAQd,IACpBgB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAC,SAAAC,IAAA,OAAAF,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAAAF,EAAAC,KAAA,GAEOtB,EAAK,CAADqB,EAAAE,KAAA,QAC2D,OAAjE7B,aAAa8B,QAAQ,QAAS5B,KAAK6B,UAAUzB,EAAK0B,eAAeL,EAAAE,KAAA,EAC3DI,EAAAA,EAAAA,IACC,8DAADC,OAC4D5B,EAAK0B,cACnE,CACEG,QAAS,CACPC,cAAc,UAADF,OAAY5B,EAAK0B,cAC9BK,OAAQ,sBAIbC,MAAK,SAACC,GACLvC,aAAa8B,QAAQ,OAAQ5B,KAAK6B,UAAUQ,EAAIC,KAAKC,MACvD,IAAG,KAAD,EACJjC,EAAS,IAAK,CAAEkC,SAAS,IAAQ,OAAAf,EAAAE,KAAA,gBAAAF,EAAAC,KAAA,EAAAD,EAAAgB,GAAAhB,EAAA,SAGnCR,QAAQC,IAAIO,EAAAgB,GAAMC,SAAS,yBAAAjB,EAAAkB,OAAA,GAAApB,EAAA,iBApB/BH,EAuBF,GAAG,CAAChB,EAAME,KAGRsC,EAAAA,EAAAA,MAACC,EAAAA,EAAS,CAAAC,SAAA,EACRC,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAAA,KAAOH,UACrBC,EAAAA,EAAAA,KAAA,OAAKG,IAAI,OAAOC,IAAK3C,EAAW4C,EAAaC,OAE/CT,EAAAA,EAAAA,MAAA,OAAKI,UAAWC,EAAAA,aAAeH,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,MAAIC,UAAWC,EAAAA,WAAaH,SAAC,2EAG7BF,EAAAA,EAAAA,MAAA,UAAQI,UAAWC,EAAAA,YAAeK,QAAS,kBAAM3C,GAAO,EAACmC,SAAA,CAAC,kCAClC,YAKhC,C,mECnEA,GAAgB,UAAY,8B,SCO5B,MALA,SAAkBS,GAAgB,IAAbT,EAAQS,EAART,SACnB,OAAOC,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAAAA,UAAYH,SAAEA,GACvC,C","sources":["webpack://rick-and-morty/./src/pages/LoginPage/LoginPage.module.scss?8fcb","pages/LoginPage/LoginPage.jsx","webpack://rick-and-morty/./src/shared/Container/Container.module.scss?97de","shared/Container/Container.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"loginWrapper\":\"LoginPage_loginWrapper__Oxj5T\",\"logo\":\"LoginPage_logo__urYM7\",\"loginTitle\":\"LoginPage_loginTitle__6k43d\",\"loginButton\":\"LoginPage_loginButton__htrCq\"};","import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useGoogleLogin } from \"@react-oauth/google\";\r\n\r\nimport { useMediaQuery } from \"react-responsive\";\r\n\r\nimport Container from \"../../shared/Container/Container\";\r\nimport logoDesktop from \"../../assets/images/logo-desktop.png\";\r\nimport logoMobile from \"../../assets/images/logo-mobile.png\";\r\nimport s from \"./LoginPage.module.scss\";\r\nimport axios from \"axios\";\r\n\r\nfunction LoginPage() {\r\n  const [user, setUser] = useState(\r\n    localStorage.getItem(\"token\")\r\n      ? JSON.parse(localStorage.getItem(\"token\"))\r\n      : null\r\n  );\r\n  const navigate = useNavigate();\r\n  const isMobile = useMediaQuery({ maxWidth: 767 });\r\n\r\n  const login = useGoogleLogin({\r\n    onSuccess: (codeResponse) => setUser(codeResponse),\r\n    onError: (error) => console.log(\"Login Failed:\", error),\r\n  });\r\n\r\n  useEffect(() => {\r\n    console.log(\"user\", user);\r\n    (async () => {\r\n      try {\r\n        if (user) {\r\n          localStorage.setItem(\"token\", JSON.stringify(user.access_token));\r\n          await axios\r\n            .get(\r\n              `https://www.googleapis.com/oauth2/v1/userinfo?access_token=${user.access_token}`,\r\n              {\r\n                headers: {\r\n                  Authorization: `Bearer ${user.access_token}`,\r\n                  Accept: \"application/json\",\r\n                },\r\n              }\r\n            )\r\n            .then((res) => {\r\n              localStorage.setItem(\"name\", JSON.stringify(res.data.name));\r\n            });\r\n          navigate(\"/\", { replace: true });\r\n        }\r\n      } catch (error) {\r\n        console.log(error.message);\r\n      }\r\n    })();\r\n  }, [user, navigate]);\r\n\r\n  return (\r\n    <Container>\r\n      <div className={s.logo}>\r\n        <img alt=\"logo\" src={isMobile ? logoMobile : logoDesktop} />\r\n      </div>\r\n      <div className={s.loginWrapper}>\r\n        <h2 className={s.loginTitle}>\r\n          Login with Google to see information about Rick and Morty characters!\r\n        </h2>\r\n        <button className={s.loginButton} onClick={() => login()}>\r\n          Log in with Google ðŸš€{\" \"}\r\n        </button>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\nexport default LoginPage;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Container_container__jzxfz\"};","import React from 'react';\r\nimport s from './Container.module.scss';\r\n\r\nfunction Container({ children }) {\r\n  return <div className={s.container}>{children}</div>;\r\n}\r\n\r\n\r\nexport default Container;"],"names":["_useState","useState","localStorage","getItem","JSON","parse","_useState2","_slicedToArray","user","setUser","navigate","useNavigate","isMobile","useMediaQuery","maxWidth","login","useGoogleLogin","onSuccess","codeResponse","onError","error","console","log","useEffect","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","setItem","stringify","access_token","axios","concat","headers","Authorization","Accept","then","res","data","name","replace","t0","message","stop","_jsxs","Container","children","_jsx","className","s","alt","src","logoMobile","logoDesktop","onClick","_ref"],"sourceRoot":""}